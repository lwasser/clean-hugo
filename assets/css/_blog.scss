@layer components {
  /* Blog hero header with teal background */
  .blog-hero {
    @apply py-8 md:py-12 mb-12;
    background-color: var(--color-primary-dark);
  }

  .blog-hero__container {
    @apply max-w-7xl mx-auto px-4 md:px-6;
  }

  .blog-hero__title {
    @apply text-4xl sm:text-5xl md:text-6xl font-sora font-bold;
    color: var(--color-white);
  }

  /* Blog grid page */
  .blog-grid {
    @apply max-w-7xl mx-auto px-4 md:px-6 py-12;
  }

  /* Category filter buttons */
  .blog-grid__filters {
    @apply flex flex-wrap gap-3 mb-12;
    display: flex !important;
  }

  .blog-grid__filter-btn {
    @apply px-4 py-2 text-sm font-medium rounded-full border transition-colors duration-200 cursor-pointer inline-flex;
    display: inline-flex !important;
    visibility: visible !important;
    background-color: var(--color-white);
    border-color: var(--color-gray-300);
    color: var(--color-gray-700);

    &:hover,
    &:focus {
      border-color: var(--color-primary);
      color: var(--color-primary);
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
    }

    &.active {
      background-color: var(--color-primary);
      border-color: var(--color-primary);
      color: var(--color-white);
      font-weight: 600;
    }
  }

  /* Blog card - base styles */
  .blog-card {
    @apply flex flex-col;
  }

  .blog-card__link {
    @apply block h-full focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg overflow-hidden;
    --tw-ring-color: var(--color-primary);
    background-color: var(--color-white);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
    transition: box-shadow 200ms ease-in-out, transform 200ms ease-in-out;

    &:hover {
      box-shadow: 0 10px 30px rgba(17, 24, 39, 0.08);
      transform: translateY(-2px);
    }
  }

  .blog-card__image {
    @apply w-full mb-3 overflow-hidden rounded-lg;
    aspect-ratio: 16 / 9;

    img {
      @apply w-full h-full object-cover;
      transition: transform 300ms ease-out;
    }
  }

  .blog-card__link:hover .blog-card__image img,
  .blog-card__link:focus .blog-card__image img {
    transform: scale(1.03);
  }

  /* Placeholder for cards without images - just a gradient */
  .blog-card__image-placeholder {
    @apply w-full mb-3 overflow-hidden rounded-lg;
    aspect-ratio: 16 / 9;
    transition: transform 300ms ease-out;
  }

  .blog-card__link:hover .blog-card__image-placeholder,
  .blog-card__link:focus .blog-card__image-placeholder {
    transform: scale(1.03);
  }

  .blog-card__content {
    @apply flex-1 space-y-2 p-4;
  }

  .blog-card__category {
    @apply text-xs font-semibold tracking-wider uppercase block mb-2;
    color: var(--color-primary);
    letter-spacing: 0.05em;
  }

  .blog-card__date {
    @apply text-xs;
    color: var(--color-gray-600);
  }

  .blog-card__author {
    @apply text-sm;
    color: var(--color-gray-700);
  }

  .blog-card__excerpt {
    @apply text-base leading-relaxed;
    color: var(--color-gray-700);
  }

  /* Blog list title - base styles */
  .blog-list-title {
    @apply font-sora font-semibold leading-tight text-left;
    color: var(--color-gray-900);
    /* Override default h2 styles to keep original size */
    font-size: inherit;
  }

  /* Featured title modifier - target 40px */
  h2.blog-list-title.title-featured {
    @apply font-sora font-bold leading-tight text-left;
    color: var(--color-gray-900);
    letter-spacing: -0.02em;
    font-size: 2rem !important; /* 32px */
    @media (min-width: 768px) {
      font-size: 2.25rem !important; /* 36px */
    }
    @media (min-width: 1024px) {
      font-size: 2.5rem !important; /* 40px - target size */
    }
    @media (min-width: 1280px) {
      font-size: 2.5rem !important; /* 40px - target size */
    }
  }

  /* Featured card modifier */
  .blog-card--featured {
    @apply lg:col-span-2;
  }

  .blog-card--featured .blog-card__content {
    @apply space-y-3 p-6;
  }

  .blog-card--featured .blog-card__category {
    @apply mb-3;
  }

  .blog-card--featured .blog-card__date {
    @apply text-base;
  }

  .blog-card--featured .blog-card__author {
    @apply text-lg;
  }

  .blog-card--featured .blog-card__excerpt {
    @apply text-lg md:text-xl leading-relaxed;
  }

  /* Featured section layout */
  .blog-grid__featured {
    @apply grid grid-cols-1 lg:grid-cols-3 gap-8 mb-16;
    min-height: 0; /* Prevent grid from collapsing */
  }

  /* Sidebar layout */
  .blog-grid__sidebar {
    @apply flex flex-col gap-6;
  }

  .blog-grid__sidebar .blog-card {
    @apply flex-1;
  }

  /* Sidebar titles - target ~24px */
  .blog-grid__sidebar .blog-list-title {
    font-size: 1.5rem !important; /* 24px - target size */
  }

  /* Grid layout */
  .blog-grid__posts {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8;
  }

  /* Grid titles - target ~20px */
  .blog-grid__posts .blog-list-title {
    font-size: 1.25rem !important; /* 20px - target size */
  }

  /* Empty state */
  .blog-grid__empty {
    @apply text-center py-16;
  }

  .blog-grid__empty-message {
    @apply text-lg;
    color: var(--color-gray-600);
  }

  /* Blog single post styles */
  .blog-post {
    @apply mx-auto;
  }

  .blog-post__header {
    @apply relative w-full mb-8;
    /* height: 400px - fixed height for blog header images */
    height: 400px;
  }

  .blog-post__header-image {
    @apply w-full h-full object-cover;
  }

  .blog-post__header-overlay {
    @apply absolute inset-0 bg-gradient-to-t from-black/100 via-black/50 to-transparent;
  }

  .blog-post__header-content {
    @apply absolute bottom-0 left-0 right-0 text-white p-8 max-w-4xl mx-auto;
  }

  .blog-post__title {
    @apply text-4xl lg:text-5xl font-bold;
  }

  .blog-post__meta {
    @apply text-sm mb-2 opacity-90;
  }

  .blog-post__photo-credit {
    @apply absolute bottom-2 right-2 text-white text-xs opacity-75;
  }

  .blog-post__excerpt {
    @apply max-w-4xl mx-auto px-8 mb-8;

    p {
      @apply text-xl leading-relaxed;
      color: var(--color-gray-700);
    }
  }

  .blog-post__content {
    @apply prose lg:prose-xl mx-auto px-8;

    /* Override prose link colors for accessibility */
    a {
      color: var(--color-link);

      &:hover,
      &:focus {
        color: var(--color-link-hover);
      }
    }

    /* Left align all headings (h2 and below) and ensure sentence case */
    h2, h3, h4, h5, h6 {
      @apply text-left;
      text-transform: none;
      text-align: left !important;
    }

    /* Code block styles */
    pre {
      @apply rounded-lg p-4 overflow-x-auto mb-4;
      background-color: #272822;
      color: #f8f8f2;
      font-size: 0.875rem;
      line-height: 1.5;
    }

    code {
      @apply rounded px-1.5 py-0.5;
      font-size: 0.875em;
      background-color: rgba(0, 0, 0, 0.05);
      color: #e83e8c;
    }

    pre code {
      @apply p-0;
      background-color: transparent;
      color: inherit;
      font-size: inherit;
    }

    /* Hugo syntax highlighting wrapper */
    .highlight {
      @apply mb-4;
      
      pre {
        @apply m-0;
      }
    }
  }

  /* Blog post notice/alert boxes - uses reusable background utilities */
  .blog-post__notice {
    @apply rounded-lg border p-4 md:p-6 my-6;
    border-color: var(--color-gray-300);
  }

  .blog-post__tags {
    @apply max-w-4xl mx-auto px-8 mt-12 text-sm;
    color: var(--color-gray-600);

    a {
      @apply transition-colors duration-200;
      color: inherit;

      &:hover {
        color: var(--color-gray-900);
      }
    }
  }

  /* Blog highlight section (for shortcode - full-width dark background) */
  .blog-highlight {
    @apply w-full py-12;
    background-color: var(--color-blog-highlight);
  }

  .blog-highlight .container {
    @apply max-w-7xl mx-auto px-4 md:px-6;
  }

  /* Shared intro styles for blog sections */
  .blog-highlight .intro,
  .blog-archives .intro {
    @apply mb-8;
  }

  .blog-highlight .intro h2 {
    @apply text-3xl md:text-4xl font-sora font-bold mb-4;
    color: var(--color-white);
  }

  /* Dark cards for blog-highlight section - same color as background */
  .blog-highlight .highlight-grid article {
    background-color: var(--color-blog-highlight);
    border-color: var(--color-gray-700);
    transition: background-color 200ms ease-in-out;

    &:hover {
      background-color: var(--color-gray-800);
    }
  }

  .blog-highlight .highlight-grid .meta {
    color: var(--color-gray-300);
  }

  .blog-highlight .highlight-grid .content h3 {
    color: var(--color-white);

    a {
      color: inherit;

      &:hover {
        color: var(--color-primary-light);
      }
    }
  }

  .blog-highlight .highlight-grid .content .excerpt {
    color: var(--color-gray-300);
  }

  .blog-highlight .highlight-grid .content .read-more {
    color: var(--color-link-on-dark);

    &:hover {
      color: var(--color-primary-light);
    }
  }

  /* Blog archives section (full-width background, light color) */
  .blog-archives {
    @apply w-full py-12;
    background-color: var(--color-primary-light);
  }

  .blog-archives__container {
    @apply max-w-7xl mx-auto px-4 md:px-6;
  }

  .blog-archives .intro h2 {
    @apply text-3xl md:text-4xl font-sora font-bold mb-4;
    color: var(--color-gray-900);
  }

  .highlight-grid {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6;
  }

  .highlight-grid article {
    @apply border rounded-lg p-6;
    background-color: var(--color-white);
    border-color: var(--color-gray-200);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
    transition: box-shadow 200ms ease-in-out, transform 200ms ease-in-out;

    &:hover {
      box-shadow: 0 10px 30px rgba(17, 24, 39, 0.08);
      transform: translateY(-2px);
    }
  }

  /* Archive cards - closer to background color, slightly lighter */
  .blog-archives .highlight-grid article {
    background-color: color-mix(in srgb, var(--color-primary-light) 60%, white 40%);
    border-color: var(--color-gray-300);

    &:hover {
      background-color: color-mix(in srgb, white 60%, var(--color-primary-light) 40%);
    }
  }

  .highlight-grid .meta {
    @apply flex items-center gap-3 mb-4;
    font-size: 0.9375rem; /* 15px - larger than text-sm */
    color: var(--color-gray-600);
  }

  .highlight-grid .meta time {
    @apply font-medium;
  }

  .highlight-grid .meta .category {
    @apply px-2 py-1 rounded font-semibold uppercase tracking-wide;
    font-size: 0.75rem; /* 12px */
    background-color: var(--color-primary-light);
    color: var(--color-primary-dark);
  }

  .highlight-grid .content h3 {
    @apply font-sora font-semibold mb-3;
    font-size: 1.25rem; /* 20px - larger than text-xl */
    line-height: 1.4;
    color: var(--color-gray-900);

    a {
      @apply transition-colors duration-200;
      color: inherit;

      &:hover {
        color: var(--color-primary);
      }
    }
  }

  .highlight-grid .content .excerpt {
    @apply leading-relaxed mb-4;
    font-size: 1rem; /* 16px - base size for better readability */
    line-height: 1.6;
    color: var(--color-gray-700);
  }

  .highlight-grid .content .read-more {
    @apply font-medium transition-colors duration-200;
    font-size: 0.9375rem; /* 15px - larger than text-sm */
    color: var(--color-link);

    &:hover {
      color: var(--color-link-hover);
    }

    i {
      @apply ml-1;
    }
  }

  /* Larger fonts for archive cards specifically */
  .blog-archives .highlight-grid .meta {
    font-size: 1rem; /* 16px */
  }

  .blog-archives .highlight-grid .content h3 {
    font-size: 1.5rem; /* 24px - much larger */
    line-height: 1.5;
    margin-bottom: 1rem;
  }

  .blog-archives .highlight-grid .content .excerpt {
    font-size: 1.125rem; /* 18px - larger */
    line-height: 1.7;
    margin-bottom: 1.25rem;
  }

  .blog-archives .highlight-grid .content .read-more {
    font-size: 1rem; /* 16px */
  }
}
