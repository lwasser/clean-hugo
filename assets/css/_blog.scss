@layer components {
  /* Blog hero header with teal background */
  .blog-hero {
    @apply py-8 md:py-12 mb-12;
    background-color: var(--color-primary-dark);

    > div {
      @apply max-w-7xl mx-auto px-4 md:px-6;

      h1 {
        color: var(--color-white);
      }
    }
  }

  /* Blog grid page */
  .blog-grid {
    @apply max-w-7xl mx-auto px-4 md:px-6 py-12;

    /* Category filter buttons */
    > div:first-child {
      @apply flex flex-wrap gap-3 mb-12;

      button {
        @apply px-4 py-2 text-sm font-medium rounded-full border transition-colors duration-200 cursor-pointer;
        background-color: var(--color-white);
        border-color: var(--color-gray-300);
        color: var(--color-gray-700);

        &:hover,
        &:focus {
          border-color: var(--color-primary);
          color: var(--color-primary);
          outline: 2px solid var(--color-primary);
          outline-offset: 2px;
        }

        &.active {
          background-color: var(--color-primary);
          border-color: var(--color-primary);
          color: var(--color-white);
          font-weight: 600;
        }
      }
    }
  }

  /* Blog card - base styles */
  .blog-card {
    @apply flex flex-col;

    > a {
      @apply block h-full focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg overflow-hidden;
      --tw-ring-color: var(--color-primary);
      background-color: var(--color-white);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
      transition: box-shadow 200ms ease-in-out, transform 200ms ease-in-out;

      &:hover {
        box-shadow: 0 10px 30px rgba(17, 24, 39, 0.08);
        transform: translateY(-2px);

        .blog-card__image img,
        .blog-card__image-placeholder {
          transform: scale(1.03);
        }
      }
    }

    /* Image container */
    .blog-card__image,
    .blog-card__image-placeholder {
      @apply w-full mb-3 overflow-hidden rounded-lg;
      aspect-ratio: 16 / 9;
      transition: transform 300ms ease-out;
    }

    .blog-card__image img {
      @apply w-full h-full object-cover;
      transition: transform 300ms ease-out;
    }

    /* Content area */
    > a > div {
      @apply flex-1 space-y-2 p-4;

      span:first-child {
        @apply text-xs font-semibold tracking-wider uppercase block mb-2;
        color: var(--color-primary);
        letter-spacing: 0.05em;
      }

      /* Card title - default grid size */
      h2 {
        @apply font-semibold leading-tight text-left;
        font-size: 1.25rem; /* 20px for grid cards */
        color: var(--color-gray-900);
      }

      time {
        @apply text-xs;
        color: var(--color-gray-600);
      }

      p:nth-of-type(1) {
        @apply text-sm;
        color: var(--color-gray-700);
      }

      p:nth-of-type(2) {
        @apply text-base leading-relaxed;
        color: var(--color-gray-700);
      }
    }
  }

  /* Featured card modifier */
  .blog-card--featured {
    @apply lg:col-span-2;

    > a > div {
      @apply space-y-3 p-6;

      /* Featured title - larger */
      h2 {
        @apply font-bold text-left;
        font-size: 2rem; /* 32px */
        letter-spacing: -0.02em;

        @media (min-width: 768px) {
          font-size: 2.25rem; /* 36px */
        }
        @media (min-width: 1024px) {
          font-size: 2.5rem; /* 40px */
        }
      }

      span:first-child { @apply mb-3; }
      time { @apply text-base; }
      p:nth-of-type(1) { @apply text-lg; }
      p:nth-of-type(2) { @apply text-lg md:text-xl leading-relaxed; }
    }
  }

  /* Featured section layout */
  .blog-grid__featured {
    @apply grid grid-cols-1 lg:grid-cols-3 gap-8 mb-16;
    min-height: 0;
  }

  /* Sidebar layout */
  .blog-grid__sidebar {
    @apply flex flex-col gap-6;

    .blog-card { @apply flex-1; }

    /* Sidebar card titles - medium size */
    .blog-card > a > div h2 {
      font-size: 1.5rem; /* 24px for sidebar cards */
    }
  }

  /* Grid layout */
  .blog-grid__posts {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8;
  }

  /* Empty state */
  .blog-grid__empty {
    @apply text-center py-16;
  }

  /* Blog single post styles */
  .blog-post__header {
    @apply relative w-full mb-8;
    height: 400px;

    > img {
      @apply w-full h-full object-cover;
    }

    > div:first-of-type {
      @apply absolute inset-0 bg-gradient-to-t from-black/100 via-black/50 to-transparent;
    }

    > div:nth-of-type(2) {
      @apply absolute bottom-0 left-0 right-0 text-white p-8 max-w-4xl mx-auto;
    }

    > div:last-child {
      @apply absolute bottom-2 right-2 text-white text-xs opacity-75;
    }
  }

  .blog-post__excerpt {
    @apply max-w-4xl mx-auto px-8 mb-8;

    p {
      @apply text-xl leading-relaxed;
      color: var(--color-gray-700);
    }
  }

  .blog-post__content {
    @apply max-w-4xl mx-auto px-8;
    /* Constrained width for readable text (matches excerpt and tags footer) */
    /* Uses base typography from main.scss - no prose plugin needed */

    /* Auto-detect and make full-width shortcodes break out of container */
    /* These shortcodes automatically become full-width */
    /* Note: youtube-container--constrained is excluded to stay within content width */
    > .metrics-bar,
    > .blog-highlight,
    > .single-card-wide,
    > .youtube-container:not(.youtube-container--constrained),
    > .two-card-row {
      width: 100vw;
      position: relative;
      left: 50%;
      right: 50%;
      margin-left: -50vw;
      margin-right: -50vw;
    }

    /* Left align all headings (h2 and below) and ensure sentence case */
    /* Headings use base typography scale from main.scss, only override alignment */
    h2, h3, h4, h5, h6 {
      @apply text-left;
      text-transform: none;
      text-align: left !important;
    }

    /* Links use base styles from main.scss */
    /* Code block styles are handled globally in _code.scss */
  }

  .blog-post__tags {
    @apply max-w-4xl mx-auto px-8 mt-12 text-sm;
    color: var(--color-gray-600);

    a {
      @apply transition-colors duration-200;
      color: inherit;

      &:hover {
        color: var(--color-gray-900);
      }
    }
  }

  /* Blog highlight section (for shortcode - full-width dark background) */
  .blog-highlight {
    @apply w-full py-12;
    background-color: var(--color-blog-highlight);

    > div {
      @apply max-w-7xl mx-auto px-4 md:px-6;

      > div:first-child {
        @apply mb-8;

        h2 { color: var(--color-white); }
      }
    }
  }

  /* Dark cards for blog-highlight section */
  .blog-highlight .highlight-grid article {
    background-color: var(--color-blog-highlight);
    border-color: var(--color-gray-700);
    transition: background-color 200ms ease-in-out;

    &:hover { background-color: var(--color-gray-800); }

    > div:first-child { color: var(--color-gray-300); }

    > div:last-child {
      h3 {
        color: var(--color-white);
        a {
          color: inherit;
          &:hover { color: var(--color-primary-light); }
        }
      }

      > p { color: var(--color-gray-300); }

      > a {
        color: var(--color-link-on-dark);
        &:hover { color: var(--color-primary-light); }
      }
    }
  }

  /* Blog archives section (full-width background, light color) */
  .blog-archives {
    @apply w-full py-12;
    background-color: var(--color-primary-light);

    > div {
      @apply max-w-7xl mx-auto px-4 md:px-6;

      > div:first-child {
        @apply mb-8;
        h2 { color: var(--color-gray-900); }
      }
    }
  }

  .highlight-grid {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6;

    article {
      @apply border rounded-lg p-6;
      background-color: var(--color-white);
      border-color: var(--color-gray-200);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
      transition: box-shadow 200ms ease-in-out, transform 200ms ease-in-out;

      &:hover {
        box-shadow: 0 10px 30px rgba(17, 24, 39, 0.08);
        transform: translateY(-2px);
      }

      > div:first-child {
        @apply flex items-center gap-3 mb-4;
        font-size: 0.9375rem;
        color: var(--color-gray-600);

        time { @apply font-medium; }

        span {
          @apply px-2 py-1 rounded font-semibold uppercase tracking-wide;
          font-size: 0.75rem;
          background-color: var(--color-primary-light);
          color: var(--color-primary-dark);
        }
      }

      > div:last-child {
        h3 {
          @apply mb-3;
          font-size: 1.25rem;
          line-height: 1.4;
          color: var(--color-gray-900);

          a {
            @apply transition-colors duration-200;
            color: inherit;
            &:hover { color: var(--color-primary); }
          }
        }

        > p {
          @apply leading-relaxed mb-4;
          font-size: 1rem;
          line-height: 1.6;
          color: var(--color-gray-700);
        }

        > a {
          @apply font-medium transition-colors duration-200;
          font-size: 0.9375rem;
          color: var(--color-link);

          &:hover { color: var(--color-link-hover); }
          i { @apply ml-1; }
        }
      }
    }
  }

  /* Archive cards - closer to background color, slightly lighter */
  .blog-archives .highlight-grid article {
    background-color: color-mix(in srgb, var(--color-primary-light) 60%, white 40%);
    border-color: var(--color-gray-300);

    &:hover {
      background-color: color-mix(in srgb, white 60%, var(--color-primary-light) 40%);
    }

    > div:first-child { font-size: 1rem; }

    > div:last-child {
      h3 {
        font-size: 1.5rem;
        line-height: 1.5;
        margin-bottom: 1rem;
      }

      > p {
        font-size: 1.125rem;
        line-height: 1.7;
        margin-bottom: 1.25rem;
      }

      > a { font-size: 1rem; }
    }
  }
}
