{{ $hero := .Params.hero | default dict }}
{{ $isGallery := or (eq .Section "gallery") (eq .Section "plants") }}
{{/* For plant pages, always use main front matter title; otherwise use hero.title if available */}}
{{ $title := "" }}
{{ if $isGallery }}
  {{ $title = .Title }}
{{ else }}
  {{ $title = $hero.title | default .Title }}
{{ end }}
{{/* Final fallback to ensure title always exists */}}
{{ if not $title }}{{ $title = .Title }}{{ end }}
{{ $subtitle := $hero.subtitle }}
{{ $excerpt := $hero.excerpt }}
{{/* Get hero image using helper partial */}}
{{ $heroImg := partial "get-image.html" (dict "image" $hero.image "fallbackAlt" ($title | default (printf "Image for %s" .Title))) }}

<section class="hero">
  <div class="container">
    <div class="hero__grid">
      <div class="hero__content">
        <h1 class="hero__title">{{ $title }}</h1>
        {{ with $subtitle }}<p class="hero__subtitle">{{ . }}</p>{{ end }}
        {{ with $excerpt }}<p class="hero__excerpt">{{ . }}</p>{{ end }}
      </div>

    <!-- Right side circle with photo - only render if image exists -->
    {{- if $heroImg.exists -}}
      <div class="hero__image-wrapper">
        <div class="hero__image-container {{ if $isGallery }}hero__image-container-square{{ end }}">
          <img src="{{ $heroImg.src | relURL }}" alt="{{ $heroImg.alt }}" class="hero__image">
        </div>
      </div>
    {{- end -}}
    </div>
  </div>
</section>

