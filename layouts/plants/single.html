{{/* Compatibility layer: plants section uses gallery single layout */}}
{{ define "main" }}
  {{ partial "hero.html" . }}

  <article class="gallery-content">
    <div class="gallery-description prose">
      {{ .Content }}
    </div>

    <section class="gallery-images">
      <h2>Gallery</h2>
      <div class="gallery-masonry">
        {{ $images := .Resources.ByType "image" }}
        {{ range $images }}
          {{ $filename := .Name | replaceRE "\\.[^.]+$" "" | replaceRE "-" " " | title }}
          {{ $caption := printf "%s Â· %s" $.Title $filename }}
          <figure>
            <a href="{{ .RelPermalink }}"
                class="glightbox"
                data-gallery="gallery-images"
                data-glightbox="title: {{ $caption }};">
              <img src="{{ .RelPermalink }}" alt="{{ or .Title $.Title }}" loading="lazy">
            </a>
            <p class="gallery-caption">
                {{ $caption }}
            </p>
          </figure>
        {{ end }}
      </div>
    </section>
  </article>
{{ end }}

{{ define "scripts" }}
  {{ if .Site.Params.theme.enableGallery | default true }}
    <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
    <script>
      GLightbox({
        selector: '.glightbox',
        touchNavigation: true,
        loop: false,
        autoplayVideos: true
      });
    </script>
  {{ end }}
{{ end }}

